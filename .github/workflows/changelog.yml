name: Changelog Bot

on:
  # Trigger when a PR review is submitted with approval
  pull_request_review:
    types: [submitted]

jobs:
  changelog:
    # Call the reusable workflow from openwisp-utils
    uses: pushpitkamboj/openwisp-utils/.github/workflows/reusable-changelog-bot.yml@test/changelog-bot
    with:
      llm-model: "gemini-2.0-flash"
    secrets:
      GEMINI_API_KEY: ${{ secrets.GEMINI_API_KEY }}
      OPENWISP_BOT_APP_ID: ${{ secrets.OPENWISP_BOT_APP_ID }}
      OPENWISP_BOT_PRIVATE_KEY: ${{ secrets.OPENWISP_BOT_PRIVATE_KEY }}
